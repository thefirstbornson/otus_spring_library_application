<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>

    <title>Otus</title>

    <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">

    <style type="text/css">
        html, body { height:100%; margin:0px; padding:0px; }
    </style>
    <script src="webjars/vue/2.5.16/vue.min.js"></script>
</head>
<body>
<table border="0" style="width:100%; height:100%;">
    <tbody>
    <tr>
        <td style="vertical-align: top;" >
            <table border="0" width="100%" cellspacing="0" cellpadding="0" >
                <tbody>
                <tr>
                    <td align="center" ><img src="otus.jpg" alt="" width="137" height="61" /></td>
                </tr>
                <tr bgcolor="#ffcc00">
                    <td height="31" align="center">
                        <a  href="\">Library</a>
                    </td>
                </tr>
                <tr>
                    <td valign="top" height="100%">
                        <table width="100%">
                            <tbody>
                            <tr>
                                <td valign="top">
                                    <table width="100%" >
                                        <tbody>
                                        <tr>
                                            <td valign="top">
                                                    <table style="margin-top: 100px;" align="center" >
                                                        <tbody>
                                                        <tr>
                                                            <th align="left">
                                                                <a  href="\books.html">Books</a>
                                                            </th>
                                                            <th align="left">
                                                                <a  href="\authors.html">Authors</a>
                                                            </th>
                                                            <th align="left">
                                                                <a  href="\genres.html">Genres</a>
                                                            </th>
                                                            <th align="left">
                                                                <a  href="\bookcomments.html">Book comments</a>
                                                            </th>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                    <table class="books" id="books-table" align="center" cellspacing="0" cellpadding="5">
                                                        <thead>
                                                        <tr>
                                                            <th>ID</th>
                                                            <th>Name</th>
                                                            <th>Author</th>
                                                            <th>Genre</th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr v-for="book in books">
                                                            <td>{{ book.id }}</td>
                                                            <td>{{ book.name}}</td>
                                                            <td>{{ book.author.firstName}}</td>
                                                            <td>{{ book.genre.genreName}}</td>
                                                            <td>
                                                                <button name="delete" class="destroy"  v-on:click="f_delete(book.id)">del</button>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                        </tbody>
                                                    </table>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
                </tbody>
            </table>
        </td>
    </tr>
    <tr>
        <td>&nbsp;</td>
    </tr>
    <tr bgcolor="#ffcc00">
        <td align="right" height="45">&nbsp;</td>
    </tr>
    </tbody>
</table>
    <tbody>
</table>
</body>
<script>
    // fetch, ES6, Vue
    fetch('/books')
        .then(response => response.json())
        .then(books => {
            new Vue({
                el: '#books-table',
                data: {
                    books: books
                }
            })
        });

</script>
<script src="/book.js"></script>

</html>
